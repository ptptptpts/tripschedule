<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°•íƒœìˆœë‹˜ ê°€ì¡± AI ì„¸ë¶€ ì—¬í–‰ ê°€ì´ë“œ</title>

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- =================================================================
    // 1. DESIGN (CSS)
    // ================================================================= -->
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fcfcfc; }
        .text-brand-dark { color: #2C3E50; } .bg-brand-dark { background-color: #2C3E50; }
        .text-brand-primary { color: #3498DB; } .bg-brand-primary { background-color: #3498DB; }
        .text-brand-accent { color: #E67E22; } .bg-brand-accent { background-color: #E67E22; }
        
        .info-trigger {
            cursor: pointer;
            color: #3498DB;
            background-color: transparent;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
            font-size: 14px;
            border: 1.5px solid #3498DB;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }
        .info-trigger:hover {
            background-color: #3498DB;
            color: white;
            transform: scale(1.1) rotate(360deg);
        }

        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
        .checklist-item.checked label { text-decoration: line-through; color: #95a5a6; }
        .tab-button.active { border-bottom-color: #3498DB; color: #3498DB; background-color: #ffffff; }
        .tab-button { background-color: #ecf0f1; }
        .accordion-header { cursor: pointer; }
        .highlight {
            background-color: #e0f2fe;
            color: #0c4a6e;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 700;
        }
        .info-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem 1rem;
            align-items: center;
        }
        .info-grid i { color: #3b82f6; width: 20px; text-align: center; }
        .info-grid dt { font-weight: 500; color: #4b5563; }
        .info-grid dd { color: #1f2937; font-weight: 500; }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .ai-button {
            background: linear-gradient(45deg, #3498DB, #8E44AD);
            color: white;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .ai-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .ai-button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-brand-dark">
    <!-- =================================================================
    // 2. STRUCTURE (HTML)
    // ================================================================= -->
    <header class="p-4 md:p-6 bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto flex justify-between items-center">
            <h1 id="header-title" class="text-xl md:text-2xl font-bold text-brand-primary"></h1>
            <nav id="main-nav" class="hidden md:flex space-x-6"></nav>
        </div>
    </header>

    <div id="hero-section" class="bg-brand-primary text-white text-center py-12 px-4">
        <h2 id="hero-title" class="text-3xl md:text-4xl font-bold"></h2>
        <p id="hero-subtitle" class="mt-2 text-lg"></p>
    </div>

    <main class="container mx-auto p-4 md:p-8">
        <!-- Trip Summary Section -->
        <section id="trip-summary" class="mb-12">
             <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-3 space-y-8">
                    <div class="card p-6">
                        <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">
                            <span><i class="fas fa-plane-departure mr-2"></i>í•­ê³µí¸ ì •ë³´</span>
                            <span class="highlight">ì˜ˆì•½ë²ˆí˜¸: FXVIQ8</span>
                        </h4>
                        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="font-bold text-lg text-gray-700 mb-3 border-b pb-2">ê°€ëŠ” í¸</h5>
                                <dl class="info-grid">
                                    <dt><i class="fas fa-plane-departure"></i>ì¶œë°œ</dt><dd>íƒ€ì´ë² ì´ íƒ€ì˜¤ìœ„ì•ˆ (TPE) T2</dd>
                                    <dt><i class="fas fa-plane-arrival"></i>ë„ì°©</dt><dd>ì„¸ë¶€ ë§‰íƒ„ (CEB) T2</dd>
                                    <dt><i class="fas fa-plane"></i>í•­ê³µì‚¬</dt><dd>ì—ë°”í•­ê³µ (BR281)</dd>
                                    <dt><i class="fas fa-calendar-day"></i>ë‚ ì§œ</dt><dd>2025ë…„ 7ì›” 14ì¼ (ì›”)</dd>
                                    <dt><i class="fas fa-clock"></i>ì‹œê°„</dt><dd>08:00 ì¶œë°œ â†’ 10:50 ë„ì°©</dd>
                                </dl>
                            </div>
                            <div>
                                <h5 class="font-bold text-lg text-gray-700 mb-3 border-b pb-2">ì˜¤ëŠ” í¸</h5>
                                <dl class="info-grid">
                                    <dt><i class="fas fa-plane-departure"></i>ì¶œë°œ</dt><dd>ì„¸ë¶€ ë§‰íƒ„ (CEB) T2</dd>
                                    <dt><i class="fas fa-plane-arrival"></i>ë„ì°©</dt><dd>íƒ€ì´ë² ì´ íƒ€ì˜¤ìœ„ì•ˆ (TPE) T2</dd>
                                    <dt><i class="fas fa-plane"></i>í•­ê³µì‚¬</dt><dd>ì—ë°”í•­ê³µ (BR282)</dd>
                                    <dt><i class="fas fa-calendar-day"></i>ë‚ ì§œ</dt><dd>2025ë…„ 7ì›” 18ì¼ (ê¸ˆ)</dd>
                                    <dt><i class="fas fa-clock"></i>ì‹œê°„</dt><dd>12:15 ì¶œë°œ â†’ 15:10 ë„ì°©</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6">
                        <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">
                            <span><i class="fas fa-hotel mr-2"></i>ìˆ™ì†Œ ì •ë³´</span>
                            <span class="highlight">ì˜ˆì•½ë²ˆí˜¸: 12392712631</span>
                        </h4>
                        <div class="mt-4">
                            <h5 class="font-bold text-xl text-gray-800">ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„, ì„¸ë¶€</h5>
                            <dl class="info-grid mt-3">
                                <dt><i class="fas fa-calendar-check"></i>ì²´í¬ì¸</dt><dd>2025ë…„ 7ì›” 14ì¼ (ì›”)</dd>
                                <dt><i class="fas fa-calendar-times"></i>ì²´í¬ì•„ì›ƒ</dt><dd>2025ë…„ 7ì›” 18ì¼ (ê¸ˆ)</dd>
                                <dt><i class="fas fa-bed"></i>ê°ì‹¤</dt><dd>ë©”ì¸ ìœ™ ë””ëŸ­ìŠ¤ ë£¸ í‚¹</dd>
                                <dt><i class="fas fa-credit-card"></i>ìƒíƒœ</dt><dd class="text-green-600 font-bold">ê²°ì œ ì™„ë£Œ</dd>
                            </dl>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-2 card p-6">
                    <h4 class="text-xl font-bold text-brand-primary mb-4"><i class="fas fa-users mr-2"></i>ìš°ë¦¬ ê°€ì¡±</h4>
                    <div class="space-y-4">
                        <div class="flex items-center p-3 bg-blue-50 rounded-lg">
                            <i class="fas fa-male text-blue-500 text-2xl w-8"></i>
                            <div class="ml-3"><p class="font-bold">ì•„ë¹ : ë°•íƒœìˆœ (PARK TAESOON)</p></div>
                        </div>
                        <div class="flex items-center p-3 bg-pink-50 rounded-lg">
                            <i class="fas fa-female text-pink-500 text-2xl w-8"></i>
                            <div class="ml-3"><p class="font-bold">ì—„ë§ˆ: ì´ì£¼ì—° (LEE JUYEON)</p></div>
                        </div>
                        <div class="flex items-center p-3 bg-yellow-50 rounded-lg">
                            <i class="fas fa-baby text-yellow-500 text-2xl w-8"></i>
                            <div class="ml-3"><p class="font-bold">ì•„ê¸°: ë°•í˜œë‚˜ (PARK HANNAH)</p><p class="text-sm text-gray-600">ì—¬í–‰ ì‹œ 19ê°œì›”</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dynamic Content Sections -->
        <section id="prep" class="mb-16 scroll-mt-24"><div id="prep-content" class="card p-6"></div></section>
        <section id="expenses" class="mb-16 scroll-mt-24"><div id="expenses-content" class="card p-6"></div></section>
        <section id="activities" class="mb-16 scroll-mt-24"><div id="activities-content"></div></section>
        <section id="dining" class="mb-16 scroll-mt-24"><div id="dining-content" class="card p-6"></div></section>
        <section id="safety" class="mb-16 scroll-mt-24"><div id="safety-content" class="card p-6"></div></section>
        <section id="itinerary" class="mb-16 scroll-mt-24"><div id="itinerary-content" class="card p-6"></div></section>
    </main>

    <!-- Modal Structure -->
    <div id="info-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-white w-full max-w-2xl rounded-lg shadow-xl p-6 md:p-8 transform scale-95 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-brand-primary"></h3>
                <button id="modal-close-btn" class="text-3xl font-light leading-none hover:text-red-500">Ã—</button>
            </div>
            <div id="modal-details" class="text-gray-700 prose max-w-none"></div>
            <div class="mt-6 pt-4 border-t">
                <h4 class="font-semibold text-sm text-gray-500">ì •ë³´ ì¶œì²˜</h4>
                <p id="modal-source" class="text-sm text-gray-600 break-all"></p>
            </div>
        </div>
    </div>

    <footer id="footer" class="bg-brand-dark text-white text-center py-6 mt-12"></footer>

    <script>
    // =================================================================
    // 3. DATA STORE
    // ëª¨ë“  í…ìŠ¤íŠ¸, ì„¤ì •, ì´ˆê¸° ë°ì´í„°ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.
    // =================================================================
    const APP_DATA = {
        uiText: {
            headerTitle: "AI ì„¸ë¶€ ê°€ì¡±ì—¬í–‰ í”Œë˜ë„ˆ",
            heroTitle: "ë°•íƒœìˆœë‹˜ ê°€ì¡±ì˜ ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ì—¬í–‰",
            heroSubtitle: "2025.07.14 ~ 07.18 | ê¶ê¸ˆí•œ í•­ëª© ì˜† 'i' ì•„ì´ì½˜ì„ í„°ì¹˜í•˜ì—¬ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.",
            prepTitle: "ì—¬í–‰ ì¤€ë¹„ ëŒ€ì‹œë³´ë“œ",
            prepSubtitle: "í•„ìˆ˜ ì¤€ë¹„ì‚¬í•­ì„ í™•ì¸í•˜ê³  ê¼¼ê¼¼í•˜ê²Œ ê³„íší•˜ì„¸ìš”.",
            expensesTitle: "ì—¬í–‰ ê²½ë¹„ ê³„ì‚°ê¸°",
            activitiesTitle: "ë¦¬ì¡°íŠ¸ í™œë™",
            diningTitle: "ë¨¹ê±°ë¦¬ ê°€ì´ë“œ",
            safetyTitle: "ê±´ê°• & ì•ˆì „ í—ˆë¸Œ",
            itineraryTitle: "4ë°• 5ì¼ ì¶”ì²œ ì¼ì •",
            itinerarySubtitle: "ì•„ë˜ ì¶”ì²œ ì¼ì •ì€ ê³ ì •ëœ ì •ë³´ì…ë‹ˆë‹¤. AIë¡œ ìƒˆë¡œìš´ ë§ì¶¤ ì¼ì •ì„ ìƒì„±í•´ ë³´ì„¸ìš”!",
            footerText: "ê°€ì¡±ì˜ ëª¨ë“  ìˆœê°„ì´ í–‰ë³µìœ¼ë¡œ ì±„ì›Œì§€ê¸°ë¥¼ ë°”ëë‹ˆë‹¤."
        },
        navigation: [ { id: 'prep', text: 'ì¤€ë¹„' }, { id: 'expenses', text: 'ê²½ë¹„' }, { id: 'activities', text: 'í™œë™' }, { id: 'dining', text: 'ë¨¹ê±°ë¦¬' }, { id: 'safety', text: 'ì•ˆì „' }, { id: 'itinerary', text: 'ì¼ì •' } ],
        exchangeRates: { PHP_TO_KRW: 23.5, PHP_TO_TWD: 0.55 },
        modalData: {
            etravel: {title: 'eTravel ë“±ë¡ ìƒì„¸ ì•ˆë‚´',details: `<p>eTravelì€ í•„ë¦¬í•€ ì…êµ­ í•„ìˆ˜ ì „ì ì…êµ­ ì‹ ê³ ì„œì…ë‹ˆë‹¤. <strong>ì¶œë°œ 72ì‹œê°„ ì „ë¶€í„° ë“±ë¡</strong> ê°€ëŠ¥í•˜ë©°, QRì½”ë“œë¥¼ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.</p><ul><li><strong>ë¹„ìš©:</strong> <strong>ì™„ì „ ë¬´ë£Œ</strong>ì…ë‹ˆë‹¤. ê²°ì œë¥¼ ìš”êµ¬í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ëŠ” ì‚¬ê¸°ì…ë‹ˆë‹¤.</li><li><strong>ë“±ë¡ì²˜:</strong> ê³µì‹ ì›¹ì‚¬ì´íŠ¸ëŠ” <a href="https://etravel.gov.ph" target="_blank" class="text-blue-600 hover:underline">etravel.gov.ph</a> ì…ë‹ˆë‹¤.</li><li><strong>ì¤‘ìš”:</strong> ê°€ì¡± êµ¬ì„±ì› ëª¨ë‘(ì•„ê¸° í¬í•¨) ê°œë³„ ë“±ë¡ í›„ QRì½”ë“œë¥¼ íœ´ëŒ€í°ì— ìº¡ì³í•´ë‘ì„¸ìš”.</li></ul>`,source: 'í•„ë¦¬í•€ ì´ë¯¼êµ­(Bureau of Immigration) ê³µì‹ ì›¹ì‚¬ì´íŠ¸'},
            payment: {title: 'ê²°ì œ ì „ëµ ë° í™˜ì „/íŒ ìƒì„¸',details: `<h4>ê²°ì œ ìˆ˜ë‹¨</h4><ul><li><strong>ì‹ ìš©ì¹´ë“œ (ì•½ 85%):</strong> ë¦¬ì¡°íŠ¸ ë‚´ ëª¨ë“  ì‹œì„¤ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ì—¬ í¸ë¦¬í•˜ê³  í™˜ì „ ìˆ˜ìˆ˜ë£Œë¥¼ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li><strong>í˜ì†Œ í˜„ê¸ˆ (ì•½ 15%):</strong> íŒ, ë°°ë‹¬ ìŒì‹, ì†Œê·œëª¨ ìƒì  ì´ìš©ì— í•„ìš”í•©ë‹ˆë‹¤.</li></ul><h4>í™˜ì „</h4><ul><li><strong>ëŒ€ë§Œì—ì„œ:</strong> íƒ€ì˜¤ìœ„ì•ˆ ê³µí•­ ë˜ëŠ” ì‹œì¤‘ ì€í–‰ì—ì„œ ì´ˆê¸° ê²½ë¹„(êµí†µë¹„, ì²«ë‚  íŒ ë“±)ë¡œ <strong>100~200 USD ìƒë‹¹ì˜ í˜ì†Œ</strong>ë§Œ í™˜ì „í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</li><li><strong>ì„¸ë¶€ì—ì„œ:</strong> í˜„ì§€ ATMì—ì„œ êµ­ì œí˜„ê¸ˆì¹´ë“œë¡œ ì¸ì¶œí•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ìœ¨ì ì…ë‹ˆë‹¤. ë¦¬ì¡°íŠ¸ í™˜ì „ì€ í™˜ìœ¨ì´ ë¶ˆë¦¬í•©ë‹ˆë‹¤.</li></ul><h4>íŒ(Tip) ë¬¸í™”</h4><ul><li><strong>ê°ì‹¤ ì²­ì†Œ:</strong> ë§¤ì¼ ì•„ì¹¨ ë² ê°œ ë°‘ì´ë‚˜ í…Œì´ë¸” ìœ„ì— 50~100í˜ì†Œ</li><li><strong>í¬í„°(ì§ ìš´ë°˜):</strong> ì§ 1ê°œë‹¹ 20~50í˜ì†Œ</li><li><strong>ë ˆìŠ¤í† ë‘:</strong> ê³„ì‚°ì„œì— ë´‰ì‚¬ë£Œ(Service Charge) í¬í•¨ ì‹œ ë³„ë„ íŒ ë¶ˆí•„ìš”.</li><li><strong>ë§ˆì‚¬ì§€ì‚¬:</strong> ë§Œì¡±ë„ì— ë”°ë¼ 100í˜ì†Œ ë‚´ì™¸</li></ul>`,source: 'ì£¼ìš” ê¸ˆìœµì‚¬ í•´ì™¸ ê²°ì œ ê°€ì´ë“œ, ì„¸ë¶€ ì—¬í–‰ ì»¤ë®¤ë‹ˆí‹°'},
            checklist: {title: 'ì¤€ë¹„ë¬¼ ìƒì„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸',details: `<h4>ë¶€ëª¨ë‹˜</h4><ul><li>ì˜ë¥˜: ì—¬ë¦„ ì˜·, ì–‡ì€ ê¸´íŒ” ê°€ë””ê±´(ëƒ‰ë°© ëŒ€ë¹„), ìˆ˜ì˜ë³µ, ì†ì˜·, ì ì˜·</li><li>ê¸°íƒ€: ëª¨ì, ì„ ê¸€ë¼ìŠ¤, ê°œì¸ ì„¸ë©´ë„êµ¬, í™”ì¥í’ˆ, ë©€í‹° ì–´ëŒ‘í„°</li></ul><h4>ì•„ê¸°</h4><ul><li>ì˜ë¥˜: ê¸´íŒ”/ë°˜íŒ” ë˜ì‰¬ê°€ë“œ, ì•„ì¿ ì•„ìŠˆì¦ˆ, ì±™ ë„“ì€ ëª¨ì, <strong>ì–´ë“œë²¤ì²˜ ì¡´ìš© ê¸´íŒ”/ì–‘ë§</strong></li><li>ìš©í’ˆ: ë°©ìˆ˜/ì¼ë°˜ ê¸°ì €ê·€, ì• ì°©ì¸í˜•, í„±ë°›ì´, íœ´ëŒ€ìš© ìœ ëª¨ì°¨, ì –ë³‘ ì†Œë…ê¸°(í•„ìš” ì‹œ)</li></ul><h4>ê³µí†µ</h4><ul><li>í•„ìˆ˜: ì—¬ê¶Œ, ì™•ë³µ í•­ê³µê¶Œ, eTravel QRì½”ë“œ, ì‹ ìš©ì¹´ë“œ, í˜ì†Œ í˜„ê¸ˆ</li><li>ê±´ê°•: ì„±ì¸/ìœ ì•„ìš© ìƒë¹„ì•½(í•´ì—´ì œ, ì§€ì‚¬ì œ ë“±), ì„ í¬ë¦¼, ì•Œë¡œì—ì ¤, ë°©ìˆ˜íŒ©</li><li><strong>ëª¨ê¸° ê¸°í”¼ì œ:</strong> ì˜ìœ ì•„ì—ê²ŒëŠ” <strong>ì´ì¹´ë¦¬ë”˜(Icaridin)</strong> ì„±ë¶„ì„ ì¶”ì²œí•˜ë©°, DEET ì„±ë¶„ì€ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li></ul>`,source: 'ì†Œì•„ê³¼ ì˜ì‚¬ ì—¬í–‰ ê±´ê°• ê¶Œê³ , ìœ¡ì•„ ì»¤ë®¤ë‹ˆí‹°'},
            transport: {title: 'ê³µí•­ ì´ë™ìˆ˜ë‹¨ ìƒì„¸ ë¹„êµ',details: `<p>ë¦¬ì¡°íŠ¸ì˜ ë‹µë³€ì— ë”°ë¥´ë©´, í˜„ì¬ <strong>ë¦¬ì¡°íŠ¸ ì…”í‹€ì€ ì´ìš©ì´ ë¶ˆê°€</strong>í•©ë‹ˆë‹¤. ëŒ€ì‹  ì•„ë˜ í”„ë¼ì´ë¹— ì°¨ëŸ‰ ì„œë¹„ìŠ¤ë¥¼ ì˜ˆì•½í•´ì•¼ í•©ë‹ˆë‹¤.</p><ul class="list-disc list-inside my-4 space-y-2"><li><strong>í”„ë¼ì´ë¹— ì„¸ë‹¨ (3ì¸ìŠ¹):</strong> í¸ë„ 1,600 í˜ì†Œ</li><li><strong>í”„ë¼ì´ë¹— ë°´ (7ì¸ìŠ¹):</strong> í¸ë„ 2,300 í˜ì†Œ</li></ul><p><strong>ì˜ˆì•½/ë¬¸ì˜:</strong> <a href="mailto:reservations.mac@shangri-la.com" class="text-blue-600 hover:underline">reservations.mac@shangri-la.com</a> ìœ¼ë¡œ íšŒì‹ í•˜ì—¬ ì˜ˆì•½í•˜ì„¸ìš”.</p><p class="font-bold mt-4 text-red-600">â€» ì¤‘ìš”: ì´ë©”ì¼ íšŒì‹ ì— ì¹´ì‹œíŠ¸ ì–¸ê¸‰ì´ ì—†ì—ˆìœ¼ë¯€ë¡œ, ì˜ˆì•½ ì‹œ <strong>19ê°œì›” ì•„ê¸°ë¥¼ ìœ„í•œ ì¹´ì‹œíŠ¸ ì œê³µ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ë°˜ë“œì‹œ ì¬í™•ì¸</strong>í•´ì•¼ í•©ë‹ˆë‹¤.</p><p class="mt-4">íŒ: íƒì‹œ/ê·¸ë©ì€ ì €ë ´í•˜ì§€ë§Œ ì¹´ì‹œíŠ¸ê°€ ì—†ì–´ ì•„ê¸° ë™ë°˜ ì‹œì—ëŠ” í”„ë¼ì´ë¹— ì°¨ëŸ‰ì´ í›¨ì”¬ ì•ˆì „í•©ë‹ˆë‹¤.</p>`,source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ì˜ˆì•½ê³¼ ì´ë©”ì¼ (2025ë…„ 6ì›” 30ì¼)'},
            facility_pool: {title: 'ì–´ë¦°ì´ ìˆ˜ì˜ì¥ & ì•„ì¿ ì•„ í”Œë ˆì´', details: 'ìœ ì•„ë¥¼ ìœ„í•´ íŠ¹ë³„íˆ ì„¤ê³„ëœ ìˆ˜ì‹¬ì´ ì–•ì€ ìˆ˜ì˜ì¥ì…ë‹ˆë‹¤. ê·¸ëŠ˜ë§‰ì´ ì„¤ì¹˜ë˜ì–´ ìˆê³ , ë¶€ë“œëŸ¬ìš´ ë°”ë‹¥ê³¼ ì‘ì€ ë¯¸ë„ëŸ¼í‹€, ë¬¼ì´ ë¿œì–´ì ¸ ë‚˜ì˜¤ëŠ” ë¶„ìˆ˜ëŒ€ê°€ ìˆì–´ ì•„ê¸°ê°€ ì•ˆì „í•˜ê²Œ ë¬¼ë†€ì´ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸'},
            facility_beach: {title: 'í”„ë¼ì´ë¹— ë¹„ì¹˜', details: 'ë¦¬ì¡°íŠ¸ íˆ¬ìˆ™ê° ì „ìš© í•´ë³€ìœ¼ë¡œ, íŒŒë„ê°€ ê±°ì˜ ì—†ì–´ ì•„ê¸°ê°€ ëª¨ë˜ë†€ì´ë¥¼ í•˜ê±°ë‚˜ ì–•ì€ ë¬¼ì—ì„œ ë°œì„ ë‹´ê·¸ê¸°ì— ì™„ë²½í•©ë‹ˆë‹¤. ë¬´ë£Œë¡œ ëª¨ë˜ë†€ì´ ì¥ë‚œê°ì„ ë¹Œë¦´ ìˆ˜ ìˆê³ , ì¹´ë°”ë‚˜ì—ì„œ í¸ì•ˆí•œ íœ´ì‹ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸'},
            facility_toddler: {title: 'í† ë“¤ëŸ¬ ì¡´', details: '3ì„¸ ì´í•˜ ì˜ìœ ì•„ë¥¼ ìœ„í•œ ì „ìš© ì‹¤ë‚´ ë†€ì´í„°ì…ë‹ˆë‹¤. í‘¹ì‹ í•œ ë§¤íŠ¸ê°€ ê¹”ë ¤ìˆê³ , ë³¼í’€, ì‘ì€ í´ë¼ì´ë° ê¸°êµ¬ ë“± ì•„ê¸°ë“¤ì˜ ë°œë‹¬ ìˆ˜ì¤€ì— ë§ëŠ” ì•ˆì „í•œ ì¥ë‚œê°ë“¤ì´ êµ¬ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë³´í˜¸ì ë™ë°˜ í•˜ì— ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸'},
            facility_adventure: {title: 'ì–´ë“œë²¤ì²˜ ì¡´', details: 'ë‹¤ì–‘í•œ ì—°ë ¹ëŒ€ì˜ ì•„ì´ë“¤ì„ ìœ„í•œ ëŒ€ê·œëª¨ ì‹¤ë‚´ ë†€ì´ ê³µê°„ì…ë‹ˆë‹¤. ê±°ëŒ€í•œ ìŠ¬ë¼ì´ë“œëŠ” í° ì•„ì´ë“¤ìš©ì´ì§€ë§Œ, ë°”ë¡œ ì˜†ì— ìœ ì•„ë“¤ì„ ìœ„í•œ ë³„ë„ì˜ ë†€ì´ ê³µê°„ì´ ë§ˆë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì…ì¥ ì‹œ ì•ˆì „ì„ ìœ„í•´ ì–‘ë§ê³¼ ê¸´íŒ” ì˜· ì°©ìš©ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸'},
            service_baby: {title: 'ì•„ê¸°ìš©í’ˆ ëŒ€ì—¬', details: 'ì•„ê¸° ì¹¨ëŒ€, ì•„ê¸° ìš•ì¡°, ì –ë³‘ ì†Œë…ê¸°, ìœ ëª¨ì°¨ ë“± ë‹¤ì–‘í•œ ì•„ê¸°ìš©í’ˆì„ ë¬´ë£Œë¡œ ëŒ€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„ìš”í•œ ë¬¼í’ˆì€ ì‚¬ì „ì— ë¦¬ì¡°íŠ¸ì— ì´ë©”ì¼ë¡œ ìš”ì²­í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.', source: 'ë¦¬ì¡°íŠ¸ ì˜ˆì•½ê³¼ ì´ë©”ì¼'},
            service_babysitter: {title: 'ë² ì´ë¹„ì‹œí„° ì„œë¹„ìŠ¤', details: 'ë¶€ë¶€ë§Œì˜ ì‹œê°„ì„ ìœ„í•´ ìœ ë£Œ ë² ì´ë¹„ì‹œí„° ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆ™ë ¨ëœ ì§ì›ì´ ì•„ì´ë¥¼ ëŒë´ì£¼ë©°, ë¡œë§¨í‹±í•œ ì €ë… ì‹ì‚¬ë‚˜ ìŠ¤íŒŒë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ì „ ì˜ˆì•½ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.', source: 'ë¦¬ì¡°íŠ¸ ì˜ˆì•½ê³¼ ì´ë©”ì¼'},
            dining_tides: { title: 'íƒ€ì´ì¦ˆ (Tides) ìƒì„¸', details: '<p>ì˜¨ ê°€ì¡±ì´ ì¦ê¸°ê¸° ì¢‹ì€ ì¸í„°ë‚´ì…”ë„ ë·”í˜ ë ˆìŠ¤í† ë‘ì…ë‹ˆë‹¤. ì•„ì¹¨, ì ì‹¬, ì €ë… ëª¨ë‘ ìš´ì˜í•˜ë©°, íŠ¹íˆ í‚¤ì¦ˆ ì„¹ì…˜ì´ ì˜ ë˜ì–´ ìˆì–´ ì•„ì´ë“¤ì´ ì¢‹ì•„í•©ë‹ˆë‹¤.</p>', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸' },
            dining_acqua: { title: 'ì•„ì¿ ì•„ (Acqua) ìƒì„¸', details: '<p>ìˆ˜ì˜ì¥ê³¼ ë°”ë‹¤ë¥¼ ë³´ë©° ì¦ê¸°ëŠ” ì´íƒˆë¦¬ì•ˆ ë ˆìŠ¤í† ë‘ì…ë‹ˆë‹¤. íƒ€ì´ì¦ˆë³´ë‹¤ ì¡°ìš©í•œ ë¶„ìœ„ê¸°ì—ì„œ ì‹ì‚¬ë¥¼ ì›í•  ë•Œ ì¶”ì²œí•©ë‹ˆë‹¤. ì•„ì¹¨ ì‹ì‚¬ë„ ì œê³µë©ë‹ˆë‹¤.</p>', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸' },
            dining_breeze: { title: 'ë¶€ì½” ë°” / ë¸Œë¦¬ì¦ˆ ìƒì„¸', details: '<p>ìˆ˜ì˜ì¥ê³¼ í•´ë³€ê°€ì— ìœ„ì¹˜í•œ ìºì£¼ì–¼ ë‹¤ì´ë‹ì…ë‹ˆë‹¤. í–„ë²„ê±°, ìƒŒë“œìœ„ì¹˜, ì¹µí…Œì¼ ë“± ê°€ë²¼ìš´ ì‹ì‚¬ì™€ ìŒë£Œë¥¼ ì¦ê¸°ê¸° ì¢‹ìŠµë‹ˆë‹¤.</p>', source: 'ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ê³µì‹ ì›¹ì‚¬ì´íŠ¸' },
            delivery_tip: {title: 'ë°°ë‹¬ ìŒì‹ ì£¼ë¬¸ ìƒì„¸ íŒ',details: `<p>ë¦¬ì¡°íŠ¸ì—ì„œ í¸í•˜ê²Œ ë‹¤ì–‘í•œ ìŒì‹ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><strong>í•„ìˆ˜ ì•±:</strong> <strong>Grab (ê·¸ë©)</strong> ë˜ëŠ” <strong>Foodpanda (í‘¸ë“œíŒë‹¤)</strong>. í•œêµ­ì—ì„œ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œ ë° ì¹´ë“œ ë“±ë¡ì„ ì™„ë£Œí•˜ì„¸ìš”.</li><li><strong>ìˆ˜ë ¹ ì¥ì†Œ:</strong> ìŒì‹ì€ ë¦¬ì¡°íŠ¸ ë¡œë¹„ì—ì„œ ì§ì ‘ ìˆ˜ë ¹í•´ì•¼ í•©ë‹ˆë‹¤.</li><li><strong>ì¹´ì¹´ì˜¤í†¡ ì£¼ë¬¸:</strong> 'ë¶€ì‚°ë§ˆíŠ¸'ëŠ” ì¹´ì¹´ì˜¤í†¡(ID: pusanmart)ìœ¼ë¡œ í•œêµ­ ì‹ë£Œí’ˆì„ í•œêµ­ì–´ë¡œ ì£¼ë¬¸í•  ìˆ˜ ìˆì–´ ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤.</li></ul>`,source: 'ì„¸ë¶€ êµë¯¼ ì»¤ë®¤ë‹ˆí‹°, ë§˜ì¹´í˜ ì„¸ë¶€ ì—¬í–‰ í›„ê¸°'},
            health: {title: 'ì•„ê¸° ê±´ê°• ìˆ˜ì¹™ ìƒì„¸',details: `<p>ì—´ëŒ€ ê¸°í›„ì—ì„œëŠ” ì‚¬ì†Œí•œ ë¶€ì£¼ì˜ê°€ ì•„ê¸°ì˜ ì»¨ë””ì…˜ì„ í•´ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><strong>ì•ˆì „í•œ ë¬¼:</strong> ì ˆëŒ€ë¡œ ìˆ˜ë—ë¬¼ì„ ë§ˆì‹œì§€ ë§ˆì„¸ìš”. ì–‘ì¹˜í•  ë•Œë„ ìƒìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.</li><li><strong>ìì™¸ì„  ì°¨ë‹¨:</strong> SPF 50+ ì´ìƒì˜ ìœ ì•„ìš© ì„ í¬ë¦¼ì„ 2-3ì‹œê°„ë§ˆë‹¤ ë§ë°”ë¥´ê³ , ê¸´íŒ” ë˜ì‰¬ê°€ë“œì™€ ëª¨ìë¥¼ ë°˜ë“œì‹œ ì°©ìš©ì‹œí‚¤ì„¸ìš”.</li><li><strong>ë²Œë ˆ í‡´ì¹˜:</strong> ë…ê¸°ì—´ ì˜ˆë°©ì„ ìœ„í•´ ì•„ê¸°ìš© ë²Œë ˆ í‡´ì¹˜ì œ(<strong>ì´ì¹´ë¦¬ë”˜</strong> ì„±ë¶„ ì¶”ì²œ)ë¥¼ ê¼¼ê¼¼íˆ ë°œë¼ì£¼ì„¸ìš”.</li></ul>`,source: '<a href="https://wwwnc.cdc.gov/travel" target="_blank" class="text-blue-600 hover:underline">ë¯¸êµ­ ì§ˆë³‘í†µì œì˜ˆë°©ì„¼í„°(CDC) ì—¬í–‰ì ê±´ê°• ì •ë³´</a>'},
            medical: {title: 'ì‘ê¸‰ ì˜ë£Œ ì§€ì› ìƒì„¸',details: `<p>ë§Œì¼ì˜ ì‚¬íƒœì— ëŒ€ë¹„í•´ ì˜ë£Œ ì§€ì› ì²´ê³„ë¥¼ ì•Œì•„ë‘ë©´ ì•ˆì‹¬ì…ë‹ˆë‹¤.</p><ul><li><strong>ë¦¬ì¡°íŠ¸ í´ë¦¬ë‹‰:</strong> ë¦¬ì¡°íŠ¸ ë‚´ì— 24ì‹œê°„ ì˜ì‚¬ì™€ ê°„í˜¸ì‚¬ê°€ ìƒì£¼í•©ë‹ˆë‹¤. í”„ëŸ°íŠ¸ ë°ìŠ¤í¬ë¥¼ í†µí•´ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li><strong>ë§‰íƒ„ ë‹¥í„°ìŠ¤ ë³‘ì›:</strong> ë¦¬ì¡°íŠ¸ì—ì„œ ê°€ì¥ ê°€ê¹ê³  ì‹œì„¤ì´ ì¢‹ì€ ì¢…í•©ë³‘ì›ì…ë‹ˆë‹¤. ì†Œì•„ê³¼ ì „ë¬¸ì˜ê°€ ìˆìŠµë‹ˆë‹¤.</li></ul><p class="font-bold mt-4">íŒ: ì¶œë°œ ì „ í•´ì™¸ì—¬í–‰ì ë³´í—˜ ê°€ì…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.</p>`,source: 'í•„ë¦¬í•€ ê´€ê´‘ë¶€, êµ­ì œ SOS(International SOS)'}
        },
        expenses: {
            fixed: [
                { item: 'í•­ê³µê¶Œ (3ì¸)', currency: 'TWD', amount: 15311 },
                { item: 'ìˆ™ì†Œ (4ë°•)', currency: 'PHP', amount: 47627 }
            ]
        },
        checklist: [ { title: 'ğŸ“„ ì„œë¥˜ & ê³µí†µ', items: ['ì—¬ê¶Œ, í•­ê³µê¶Œ, eTravel', 'ì‹ ìš©ì¹´ë“œ, í˜ì†Œ', 'ìƒë¹„ì•½, ëª¨ê¸°ê¸°í”¼ì œ'] }, { title: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ë¶€ëª¨ë‹˜', items: ['ì—¬ë¦„ ì˜·, ê¸´íŒ” ì˜·', 'ìˆ˜ì˜ë³µ, ì„ ê¸€ë¼ìŠ¤', 'ê°œì¸ ì„¸ë©´ë„êµ¬'] }, { title: 'ğŸ‘¶ ì•„ê¸°', items: ['ê¸°ì €ê·€, í„±ë°›ì´', 'ë˜ì‰¬ê°€ë“œ, ì•„ì¿ ì•„ìŠˆì¦ˆ', 'ìœ ëª¨ì°¨, ì• ì°©ì¸í˜•'] } ],
        charts: {
            payment: { type: 'doughnut', data: { labels: ["ì‹ ìš©ì¹´ë“œ", "í˜ì†Œ í˜„ê¸ˆ"], datasets: [{ data: [85, 15], backgroundColor: ["#3498DB", "#5DADE2"], borderWidth: 0 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } } },
            transport: { type: 'bar', data: { labels: ["í”„ë¼ì´ë¹— ë°´", "í”„ë¼ì´ë¹— ì„¸ë‹¨", "íƒì‹œ/ê·¸ë©"], datasets: [{ label: "ì•ˆì „ë„", data: [10, 10, 5], backgroundColor: "#2C3E50" }, { label: "í¸ì˜ì„±", data: [10, 9, 8], backgroundColor: "#5DADE2" }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 10 } }, plugins: { legend: { position: 'bottom' } } } }
        },
        activities: {
            facilities: [ 
                { id: 'facility_pool', text: 'ì–´ë¦°ì´ ìˆ˜ì˜ì¥ & ì•„ì¿ ì•„ í”Œë ˆì´', icon: 'fa-swimming-pool' }, 
                { id: 'facility_beach', text: 'í”„ë¼ì´ë¹— ë¹„ì¹˜', icon: 'fa-umbrella-beach' },
                { id: 'facility_toddler', text: 'í† ë“¤ëŸ¬ ì¡´ (ì‹¤ë‚´)', icon: 'fa-shapes' },
                { id: 'facility_adventure', text: 'ì–´ë“œë²¤ì²˜ ì¡´ (ì‹¤ë‚´)', icon: 'fa-child-reaching' }
            ],
            services: {
                baby: [
                    { id: 'service_baby', icon: 'fa-baby-carriage', text: 'ì•„ê¸°ìš©í’ˆ ëŒ€ì—¬', detail: 'ì•„ê¸° ì¹¨ëŒ€, ìš•ì¡°, ìœ ëª¨ì°¨ ë“± ëŒ€ì—¬ ê°€ëŠ¥ (ì‚¬ì „ ë¬¸ì˜ í•„ìˆ˜)' },
                ],
                babysitter: {
                    id: 'service_babysitter',
                    title: 'ë² ì´ë¹„ì‹œí„° ì„œë¹„ìŠ¤',
                    details: [
                        '<strong>ìš”ê¸ˆ:</strong> ìµœì´ˆ 2ì‹œê°„ 1,000 PHP, ì´í›„ ì‹œê°„ë‹¹ 500 PHP',
                        '<strong>ì˜ˆì•½:</strong> ì‚¬ì „ ì˜ˆì•½ í•„ìˆ˜',
                        '<strong>ê²°ì œ:</strong> í˜„ê¸ˆ ë˜ëŠ” ë£¸ì°¨ì§€(3.5% ìˆ˜ìˆ˜ë£Œ) ê°€ëŠ¥'
                    ],
                    contact: 'guestservicecenter.mac@shangri-la.com'
                }
            }
        },
        dining: {
            resort: [ { id: 'dining_tides', title: 'íƒ€ì´ì¦ˆ (Tides)', desc: 'ê°€ì¡± ì‹ì‚¬ì— ê°€ì¥ ë¬´ë‚œí•œ ì¸í„°ë‚´ì…”ë„ ë·”í˜' }, { id: 'dining_acqua', title: 'ì•„ì¿ ì•„ (Acqua)', desc: 'ì¡°ìš©í•œ ë¶„ìœ„ê¸°ì˜ ì´íƒˆë¦¬ì•ˆ ë ˆìŠ¤í† ë‘' }, { id: 'dining_breeze', title: 'ë¶€ì½” ë°” / ë¸Œë¦¬ì¦ˆ', desc: 'ìˆ˜ì˜ì¥ ì˜† ìºì£¼ì–¼ ë‹¤ì´ë‹' } ],
            delivery_static: {
                restaurants: ['ë³¸ì´Œ (Bonchon)', 'ë¶„ì‹ (Bunsik)', 'ë‹¤ì¸ (Da-In)'],
                marts: ['ì•„ì”¨ ì„¸ì‹œ í•œì¸ë§ˆíŠ¸', 'ë¶€ì‚°ë§ˆíŠ¸ (ì¹´í†¡: pusanmart)']
            },
            options: [
                { value: 'ì•„ë¬´ê±°ë‚˜', text: 'ì•„ë¬´ê±°ë‚˜' }, { value: 'í•„ë¦¬í•€ í˜„ì§€ì‹', text: 'í•„ë¦¬í•€ í˜„ì§€ì‹' }, { value: 'í•´ì‚°ë¬¼', text: 'í•´ì‚°ë¬¼' }, { value: 'í•œì‹', text: 'í•œì‹' }, { value: 'ì–‘ì‹ (íŒŒìŠ¤íƒ€, ìŠ¤í…Œì´í¬)', text: 'ì–‘ì‹' }, { value: 'í”¼ì ë˜ëŠ” í–„ë²„ê±°', text: 'í”¼ì/í–„ë²„ê±°' }, { value: 'ë§¥ì£¼ì™€ ì˜ ì–´ìš¸ë¦¬ëŠ” ì•ˆì£¼', text: 'ë§¥ì£¼ ì•ˆì£¼' }, { value: 'ì¼€ì´í¬ ë˜ëŠ” ì•„ì´ìŠ¤í¬ë¦¼ ê°™ì€ ë””ì €íŠ¸', text: 'ë””ì €íŠ¸' }, { value: 'ì•„ì´ê°€ ì˜ ë¨¹ëŠ” í‚¤ì¦ˆ í”„ë Œë“¤ë¦¬ ë©”ë‰´', text: 'í‚¤ì¦ˆ í”„ë Œë“¤ë¦¬' }
            ]
        },
        itinerary: [ {d:1,t:"ë„ì°© ë° ë¦¬ì¡°íŠ¸ ì ì‘",c:["ê³µí•­ ë„ì°© í›„ í”„ë¼ì´ë¹— ì°¨ëŸ‰ìœ¼ë¡œ ì´ë™","ì ì‹¬ ì‹ì‚¬ í›„ ì¡°ìš©í•œ ì˜¤ì…˜ ìœ™ ìˆ˜ì˜ì¥ì—ì„œ íœ´ì‹","íƒ€ì´ì¦ˆ ë·”í˜ì—ì„œ ì´ë¥¸ ì €ë…, í•´ë³€ì—ì„œ ì¼ëª° ê°ìƒ"]},{d:2,t:"ë¬¼ë†€ì´ì˜ ì„¸ê³„",c:["íƒ€ì´ì¦ˆì—ì„œ ì•„ì¹¨ ì‹ì‚¬, ì–´ë¦°ì´ ìˆ˜ì˜ì¥ & ì•„ì¿ ì•„ í”Œë ˆì´","ë£¸ì„œë¹„ìŠ¤ ì ì‹¬, ì•„ê¸° ë‚®ì . ë¶€ëª¨ë‹˜ì€ í•´ë³€ ì¹´ë°”ë‚˜ì—ì„œ íœ´ì‹","ë² ì´ë¹„ì‹œí„° ì„œë¹„ìŠ¤ ì´ìš© í›„ ì¹´ìš°ë¦¬ ì½”ë¸Œì—ì„œ ë¡œë§¨í‹± ì €ë… ì‹ì‚¬"]},{d:3,t:"ë°”ë‹¤ì™€ ìœ¡ì§€ íƒí—˜",c:["ì•„ì¿ ì•„ì—ì„œ ì¡°ìš©í•œ ì•„ì¹¨ ì‹ì‚¬, í•´ë³€ì—ì„œ ë¬¼ê³ ê¸° ë¨¹ì´ì£¼ê¸° & ëª¨ë˜ë†€ì´","ë¸Œë¦¬ì¦ˆì—ì„œ ì ì‹¬, ì•„ê¸° ë‚®ì . ë¶€ëª¨ë‹˜ êµëŒ€ë¡œ ìŠ¤íŒŒ ì´ìš© ë˜ëŠ” ì•„ê¸°ì™€ í† ë“¤ëŸ¬ ì¡´ ë°©ë¬¸","ë°°ë‹¬ ì•±ìœ¼ë¡œ í•œì‹ ì¹˜í‚¨ê³¼ ë§¥ì£¼ ì£¼ë¬¸! ê°ì‹¤ì—ì„œ í¸ì•ˆí•œ ì €ë…"]},{d:4,t:"ë†€ì´ì™€ íœ´ì‹",c:["íƒ€ì´ì¦ˆì—ì„œ ì•„ì¹¨ ì‹ì‚¬, ì–´ë“œë²¤ì²˜ ì¡´(ìœ ì•„ ê³µê°„) ë°©ë¬¸ í›„ ë¯¸ë‹ˆ ê³¨í”„","ë·”í˜ì—ì„œ ì ì‹¬, ì•„ê¸° ë‚®ì . ë¶€ë¶€ í•¨ê»˜ ë©”ì¸ ìˆ˜ì˜ì¥ì—ì„œ ë§ˆì§€ë§‰ ë¬¼ë†€ì´","ê°€ì¥ ì¢‹ì•˜ë˜ ë ˆìŠ¤í† ë‘ì—ì„œ ë§ˆì§€ë§‰ ê¸°ë… ì €ë… ì‹ì‚¬"]},{d:5,t:"ì•ˆë…•, ì„¸ë¶€!",c:["ì—¬ìœ ë¡œìš´ ë§ˆì§€ë§‰ ì•„ì¹¨ ì‹ì‚¬ í›„ ì§ ì •ë¦¬","ì²´í¬ì•„ì›ƒ í›„ í”„ë¼ì´ë¹— ì°¨ëŸ‰ìœ¼ë¡œ ê³µí•­ ì´ë™"]} ]
    };

    // =================================================================
    // 4. LOGIC (JavaScript)
    // =================================================================
    document.addEventListener('DOMContentLoaded', () => {
        try {
            // --- RENDER FUNCTIONS ---
            const renderStaticText = () => {
                const { uiText } = APP_DATA;
                document.getElementById('header-title').textContent = uiText.headerTitle;
                document.getElementById('hero-title').textContent = uiText.heroTitle;
                document.getElementById('hero-subtitle').textContent = uiText.heroSubtitle;
                document.getElementById('footer').innerHTML = `<p>${uiText.footerText}</p>`;
            };

            const renderNavigation = () => {
                const navContainer = document.getElementById('main-nav');
                if (!navContainer) return;
                navContainer.innerHTML = APP_DATA.navigation.map(item => 
                    `<a href="#${item.id}" class="nav-link font-semibold pb-1 border-b-2 border-transparent hover:text-brand-accent transition-colors">${item.text}</a>`
                ).join('');
            };
            
            const renderPrepSection = () => {
                const container = document.getElementById('prep-content');
                if (!container) return;
                const { prepTitle, prepSubtitle } = APP_DATA.uiText;
                const { checklist } = APP_DATA;

                container.innerHTML = `
                    <h3 class="text-3xl font-bold text-center mb-2">${prepTitle}</h3>
                    <p class="text-center text-gray-600 mb-8">${prepSubtitle}</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div>
                            <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">eTravel ë“±ë¡ ì ˆì°¨ <span class="info-trigger" data-modal-id="etravel">i</span></h4>
                            <div class="mt-4 space-y-4 md:space-y-0 md:flex md:items-center md:justify-between text-center">
                                <div class="flex-1"><div class="text-4xl">ğŸ“„</div><p class="font-bold mt-2">1. ì˜¨ë¼ì¸ ë“±ë¡</p></div>
                                <div class="text-xl text-gray-400 hidden md:block">â†’</div><div class="text-xl text-gray-400 md:hidden transform rotate-90 mx-auto">â†“</div>
                                <div class="flex-1"><div class="text-4xl">ğŸ“±</div><p class="font-bold mt-2">2. QR ì½”ë“œ ì €ì¥</p></div>
                                <div class="text-xl text-gray-400 hidden md:block">â†’</div><div class="text-xl text-gray-400 md:hidden transform rotate-90 mx-auto">â†“</div>
                                <div class="flex-1"><div class="text-4xl">ğŸ›‚</div><p class="font-bold mt-2">3. ì…êµ­ ì‹¬ì‚¬</p></div>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">ê³µí•­ ì´ë™ ë°©ë²• <span class="info-trigger" data-modal-id="transport">i</span></h4>
                            <div class="chart-container mt-4" style="height:180px;"><canvas id="transportChart"></canvas></div>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                        <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ <span class="info-trigger" data-modal-id="checklist">i</span></h4>
                        <div id="checklist-container" class="mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                            ${checklist.map(category => `
                                <div class="space-y-2"> <h5 class="font-bold">${category.title}</h5> <ul class="space-y-1 pl-2">
                                    ${category.items.map(item => `<li class="checklist-item"><label class="flex items-center cursor-pointer"><input type="checkbox" class="mr-2 h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary">${item}</label></li>`).join('')}
                                </ul> </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                new Chart(document.getElementById("transportChart").getContext("2d"), APP_DATA.charts.transport);
            };

            const renderExpensesSection = () => {
                const container = document.getElementById('expenses-content');
                if (!container) return;
                const { expensesTitle } = APP_DATA.uiText;
                const { fixed } = APP_DATA.expenses;
                
                container.innerHTML = `
                    <h3 class="text-3xl font-bold text-center mb-8">${expensesTitle}</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-xl font-bold text-brand-dark mb-4">ê³ ì • ì§€ì¶œ</h4>
                            <div id="fixed-expenses-list" class="space-y-2">
                                ${fixed.map(e => `
                                    <div class="flex justify-between items-center p-3 bg-gray-100 rounded-lg">
                                        <span><i class="fas fa-receipt mr-2 text-gray-500"></i>${e.item}</span>
                                        <span class="font-bold">${e.amount.toLocaleString()} ${e.currency}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-brand-dark mb-4">ì¶”ê°€ ì§€ì¶œ (PHP)</h4>
                            <div id="additional-expenses-list" class="space-y-2 mb-4"></div>
                            <div class="flex gap-2">
                                <input type="text" id="expense-item" placeholder="í•­ëª© (ì˜ˆ: ì €ë… ì‹ì‚¬)" class="flex-grow p-2 border rounded-md">
                                <input type="number" id="expense-amount" placeholder="ê¸ˆì•¡" class="w-28 p-2 border rounded-md">
                                <button id="add-expense-btn" class="bg-brand-primary text-white px-4 rounded-md hover:bg-blue-600">ì¶”ê°€</button>
                            </div>
                        </div>
                    </div>
                    <hr class="my-8">
                    <div id="total-expenses" class="text-center">
                        <h4 class="text-2xl font-bold">ì´ ì˜ˆìƒ ê²½ë¹„</h4>
                        <div id="total-display" class="text-3xl font-bold text-brand-accent mt-2"></div>
                        <div class="mt-4 space-x-2">
                            <button class="currency-btn bg-gray-200 px-4 py-1 rounded-full text-sm" data-currency="PHP">PHP</button>
                            <button class="currency-btn bg-gray-200 px-4 py-1 rounded-full text-sm" data-currency="TWD">TWD</button>
                            <button class="currency-btn bg-gray-200 px-4 py-1 rounded-full text-sm" data-currency="KRW">KRW</button>
                        </div>
                        <p id="exchange-rate-info" class="text-xs text-gray-500 mt-3"></p>
                    </div>
                `;
                updateTotals('PHP'); // Initial render in PHP
            };

            const renderActivitiesSection = () => {
                const container = document.getElementById('activities-content');
                if (!container) return;
                const { activitiesTitle } = APP_DATA.uiText;
                const { facilities, services } = APP_DATA.activities;
                
                container.innerHTML = `
                    <h3 class="text-3xl font-bold text-center mb-8">${activitiesTitle}</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                        <div class="card p-6">
                            <h4 class="text-xl font-bold text-brand-primary">ë¦¬ì¡°íŠ¸ ì‹œì„¤</h4>
                            <div class="mt-4 space-y-4">
                                ${facilities.map(item => `
                                    <div class="p-4 rounded-lg border bg-gray-50">
                                        <h5 class="font-bold flex justify-between items-center">${item.text} <span class="info-trigger" data-modal-id="${item.id}">i</span></h5>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="card p-6">
                            <h4 class="text-xl font-bold text-brand-primary">ë¦¬ì¡°íŠ¸ ì„œë¹„ìŠ¤</h4>
                            <div class="mt-4 space-y-4">
                                ${services.baby.map(s => `
                                    <div class="p-4 rounded-lg border bg-gray-50">
                                        <h5 class="font-bold flex justify-between items-center">${s.text} <span class="info-trigger" data-modal-id="${s.id}">i</span></h5>
                                    </div>
                                `).join('')}
                                <div class="p-4 rounded-lg border bg-gray-50">
                                    <h5 class="font-bold flex justify-between items-center">${services.babysitter.title} <span class="info-trigger" data-modal-id="${services.babysitter.id}">i</span></h5>
                                    <ul class="text-sm text-gray-600 list-disc list-inside mt-2">
                                        ${services.babysitter.details.map(d => `<li innerHTML="${d}">${d}</li>`).join('').replace(/<strong/g, '<strong').replace(/<\/strong/g, '</strong')}
                                    </ul>
                                    <p class="text-sm text-gray-600 mt-1"><strong>ë¬¸ì˜:</strong> <a href="mailto:${services.babysitter.contact}" class="text-blue-600 hover:underline">${services.babysitter.contact}</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            };

            const renderDiningSection = () => {
                const container = document.getElementById('dining-content');
                if (!container) return;
                const { diningTitle } = APP_DATA.uiText;
                const { resort, options, delivery_static } = APP_DATA.dining;
                const diningOptionsHtml = options.map(opt => `<option value="${opt.value}">${opt.text}</option>`).join('');

                container.innerHTML = `
                    <h3 class="text-3xl font-bold text-center mb-8">${diningTitle}</h3>
                    <div class="flex justify-center border-b mb-6">
                        <button id="tab-restaurant" class="tab-button flex-1 py-2 font-semibold text-lg border-b-4 transition-colors active">ë§›ì§‘ ì¶”ì²œ (AI)</button>
                        <button id="tab-delivery" class="tab-button flex-1 py-2 font-semibold text-lg border-b-4 transition-colors">ë°°ë‹¬ & ë£¸ì„œë¹„ìŠ¤ (AI)</button>
                    </div>
                    <!-- Restaurant Tab -->
                    <div id="content-restaurant" class="tab-content">
                        <h4 class="text-xl font-bold text-brand-dark mb-4">ë¦¬ì¡°íŠ¸ ë‹¤ì´ë‹</h4>
                        <div class="space-y-4">${resort.map(item => `
                            <div class="p-4 rounded-lg border"><h5 class="font-bold flex justify-between items-center">${item.title} <span class="info-trigger" data-modal-id="${item.id}">i</span></h5><p class="text-sm text-gray-600">${item.desc}</p></div>
                        `).join('')}</div>
                        <hr class="my-8">
                        <div>
                            <h4 class="text-xl font-bold text-brand-dark mb-4">âœ¨ AI ê·¼ì²˜ ë§›ì§‘ ì¶”ì²œ</h4>
                            <p class="text-gray-600 mb-4">ì›í•˜ëŠ” ìŒì‹ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ê³  ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, AIê°€ ì•„ê¸°ì™€ í•¨ê»˜ ê°€ê¸° ì¢‹ì€ ë¦¬ì¡°íŠ¸ ê·¼ì²˜ ë§›ì§‘ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.</p>
                            <div id="ai-dining-controls" class="flex flex-wrap gap-4 items-center">
                                <select id="dining-cuisine-select" class="p-2 border rounded-md">${diningOptionsHtml}</select>
                                <button id="generate-dining-btn" class="ai-button">ì¶”ì²œ ë°›ê¸°</button>
                            </div>
                            <div id="ai-dining-loader" class="hidden"><div class="loader"></div></div>
                            <div id="ai-dining-results" class="mt-6 space-y-4"></div>
                        </div>
                    </div>
                    <!-- Delivery Tab -->
                    <div id="content-delivery" class="tab-content hidden">
                        <div>
                            <h4 class="text-xl font-bold text-brand-dark mb-4">ë°°ë‹¬ ì •ë³´</h4>
                            <div class="space-y-4">
                                <div><h5 class="font-bold">í•œì‹ ë°°ë‹¬ ì¶”ì²œ</h5><ul class="list-disc list-inside pl-2">${delivery_static.restaurants.map(item => `<li>${item}</li>`).join('')}</ul></div>
                                <div><h5 class="font-bold mt-4">ë§¥ì£¼ & ê°„ì‹ ë°°ë‹¬</h5><ul class="list-disc list-inside pl-2">${delivery_static.marts.map(item => `<li>${item}</li>`).join('')}</ul></div>
                                <div class="mt-4 bg-green-100 p-3 rounded-lg"><p class="font-bold text-center">â­ï¸ ë°°ë‹¬ ê¿€íŒ <span class="info-trigger" data-modal-id="delivery_tip">i</span></p></div>
                            </div>
                            <hr class="my-8">
                            <h4 class="text-xl font-bold text-brand-dark mb-4">âœ¨ AI ë°°ë‹¬ ìŒì‹ ì¶”ì²œ</h4>
                            <p class="text-gray-600 mb-4">ì›í•˜ëŠ” ìŒì‹ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ë©´, AIê°€ ê·¸ë©í‘¸ë“œ/í‘¸ë“œíŒë‹¤ë¡œ ì£¼ë¬¸ ê°€ëŠ¥í•œ ë©”ë‰´ë¥¼ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.</p>
                            <div id="ai-delivery-controls" class="flex flex-wrap gap-4 items-center">
                                <select id="delivery-cuisine-select" class="p-2 border rounded-md">${diningOptionsHtml}</select>
                                <button id="generate-delivery-btn" class="ai-button">ì¶”ì²œ ë°›ê¸°</button>
                            </div>
                            <div id="ai-delivery-loader" class="hidden"><div class="loader"></div></div>
                            <div id="ai-delivery-results" class="mt-6 space-y-4"></div>
                        </div>
                    </div>
                `;
            };

            const renderSafetySection = () => {
                const container = document.getElementById('safety-content');
                if (!container) return;
                const { safetyTitle } = APP_DATA.uiText;
                container.innerHTML = `
                    <h3 class="text-3xl font-bold text-center mb-8">${safetyTitle}</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">ì•„ê¸° ê±´ê°• 3ëŒ€ ìˆ˜ì¹™ <span class="info-trigger" data-modal-id="health">i</span></h4>
                            <div class="flex justify-around text-center mt-6">
                                <div><div class="text-5xl mb-2">ğŸ’§</div><h5 class="font-bold">ì•ˆì „í•œ ë¬¼</h5></div>
                                <div><div class="text-5xl mb-2">â˜€ï¸</div><h5 class="font-bold">ìì™¸ì„  ì°¨ë‹¨</h5></div>
                                <div><div class="text-5xl mb-2">ğŸ¦Ÿ</div><h5 class="font-bold">ë²Œë ˆ í‡´ì¹˜</h5></div>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-brand-primary flex justify-between items-center">ì‘ê¸‰ ì˜ë£Œ ì§€ì› <span class="info-trigger" data-modal-id="medical">i</span></h4>
                            <div class="space-y-4 mt-4">
                                <div class="p-3 rounded-lg border"><p class="font-bold">ë¦¬ì¡°íŠ¸ ë‚´ í´ë¦¬ë‹‰ (24ì‹œê°„)</p></div>
                                <div class="p-3 rounded-lg border"><p class="font-bold">ë§‰íƒ„ ë‹¥í„°ìŠ¤ ë³‘ì›</p></div>
                                <div class="p-3 rounded-lg text-center bg-red-100"><p class="font-bold text-red-700">êµ­ê°€ ê¸´ê¸‰ì „í™”: 911</p></div>
                            </div>
                        </div>
                    </div>
                `;
            };

            const renderItinerarySection = (itineraryData = APP_DATA.itinerary) => {
                const container = document.getElementById('itinerary-content');
                if (!container) return;
                const { itineraryTitle, itinerarySubtitle } = APP_DATA.uiText;
                container.innerHTML = `
                    <h3 class="text-3xl font-bold text-center mb-2">${itineraryTitle}</h3>
                    <p class="text-center text-gray-600 mb-4">${itinerarySubtitle}</p>
                    <div class="mb-4">
                        <textarea id="itinerary-concept" class="w-full p-2 border rounded-md" placeholder="ì›í•˜ëŠ” ì—¬í–‰ ì»¨ì…‰ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: íœ´ì–‘ê³¼ ë¬¼ë†€ì´ ìœ„ì£¼ë¡œ, ì¢€ ë” ì—¬ìœ ë¡­ê²Œ)"></textarea>
                    </div>
                    <div class="text-center mb-8">
                        <button id="generate-itinerary-btn" class="ai-button">âœ¨ AI ë§ì¶¤ ì¼ì • ìƒì„±í•˜ê¸°</button>
                    </div>
                    <div id="ai-itinerary-loader" class="hidden"><div class="loader"></div></div>
                    <div id="itinerary-accordion" class="space-y-2">
                        ${itineraryData.map(day => `
                            <div class="bg-white rounded-lg border overflow-hidden">
                                <button class="accordion-header w-full p-4 text-left font-bold text-lg bg-gray-50 hover:bg-gray-100 flex justify-between items-center transition-colors">
                                    <span>${day['ì¼ì°¨'] || day.d}ì¼ì°¨: ${day['í…Œë§ˆ'] || day.t}</span>
                                    <span class="transform transition-transform duration-300">â–¼</span>
                                </button>
                                <div class="accordion-content p-4 border-t hidden space-y-2 bg-white">
                                    ${(day['í™œë™'] || day.c).map(item => `<p class="pl-2"> â€¢ ${item}</p>`).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            };

            // --- Gemini API Call Function ---
            const callGeminiAPI = async (prompt, schema) => {
                const apiKey = ""; // API í‚¤ëŠ” ë¹„ì›Œë‘ì„¸ìš”.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{ role: "user", parts: [{ text: prompt }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: schema,
                        temperature: 0.8,
                    }
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.text();
                        console.error("API Error Response:", errorBody);
                        throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0]) {
                        return JSON.parse(result.candidates[0].content.parts[0].text);
                    } else {
                        console.error("Unexpected API response structure:", result);
                        throw new Error("API ì‘ë‹µì—ì„œ ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    }
                } catch (error) {
                    console.error("Gemini API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                    return null;
                }
            };

            // --- AI Feature Handlers ---
            const handleGenerateItinerary = async (button) => {
                button.disabled = true;
                const loader = document.getElementById('ai-itinerary-loader');
                const accordion = document.getElementById('itinerary-accordion');
                const concept = document.getElementById('itinerary-concept').value.trim();
                
                accordion.innerHTML = '';
                loader.classList.remove('hidden');
                
                const userRequest = concept ? `íŠ¹íˆ ë‹¤ìŒ ì»¨ì…‰ì„ ë°˜ì˜í•´ì£¼ì„¸ìš”: "${concept}".` : "";
                const prompt = `ë‹¹ì‹ ì€ ìœ ëŠ¥í•œ ì—¬í–‰ í”Œë˜ë„ˆì…ë‹ˆë‹¤. í•„ë¦¬í•€ ì„¸ë¶€ì˜ ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ë¦¬ì¡°íŠ¸ì— 7ì›” 14ì¼ë¶€í„° 7ì›” 18ì¼ê¹Œì§€ 4ë°• 5ì¼ê°„ ë¨¸ë¬´ëŠ” 19ê°œì›” ì•„ê¸°ë¥¼ ë™ë°˜í•œ 3ì¸ ê°€ì¡±(ì„±ì¸ 2, ìœ ì•„ 1)ì„ ìœ„í•œ í¸ì•ˆí•˜ê³  ì•„ê¸° ì¹œí™”ì ì¸ ì—¬í–‰ ì¼ì •ì„ ì§œì£¼ì„¸ìš”. ì´ ê°€ì¡±ì€ íœ´ì‹, ê°€ë²¼ìš´ ë¬¼ë†€ì´, ë§›ìˆëŠ” ìŒì‹ì„ ì¦ê¹ë‹ˆë‹¤. ì´ë™ ì‹œê°„ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ë¦¬ì¡°íŠ¸ ë‚´ë¶€ ë˜ëŠ” ë§¤ìš° ê°€ê¹Œìš´ ê³³ì˜ í™œë™ì— ì´ˆì ì„ ë§ì¶°ì£¼ì„¸ìš”. ${userRequest} ê° ë‚ ì§œë³„ë¡œ ì§§ì€ í…Œë§ˆì™€ 2-3ê°œì˜ í™œë™ ëª©ë¡ì„ ì œê³µí•´ì£¼ì„¸ìš”. 1ì¼ì°¨ ì˜¤ì „ì— ë„ì°©í•˜ê³  5ì¼ì°¨ ì˜¤í›„ì— ì¶œë°œí•˜ëŠ” ì¼ì •ì…ë‹ˆë‹¤. ì‘ë‹µì€ ë°˜ë“œì‹œ JSON ê°ì²´ë¡œë§Œ, ê·¸ë¦¬ê³  ëª¨ë“  í‚¤ì™€ ê°’ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
                const schema = {
                    type: "ARRAY",
                    items: {
                        type: "OBJECT",
                        properties: {
                            "ì¼ì°¨": { type: "NUMBER", description: "ì—¬í–‰ Nì¼ì°¨" },
                            "í…Œë§ˆ": { type: "STRING", description: "ê·¸ë‚ ì˜ í…Œë§ˆ" },
                            "í™œë™": { type: "ARRAY", items: { type: "STRING" }, description: "í™œë™ ëª©ë¡" }
                        },
                        required: ["ì¼ì°¨", "í…Œë§ˆ", "í™œë™"]
                    }
                };

                const newItinerary = await callGeminiAPI(prompt, schema);
                loader.classList.add('hidden');

                if (newItinerary) {
                    renderItinerarySection(newItinerary);
                } else {
                    accordion.innerHTML = `<p class="text-center text-red-500">ì¼ì • ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>`;
                    setTimeout(() => renderItinerarySection(APP_DATA.itinerary), 3000);
                }
                document.getElementById('generate-itinerary-btn').disabled = false;
            };
            
            const handleGenerateDining = async (button) => {
                button.disabled = true;
                const loader = document.getElementById('ai-dining-loader');
                const resultsContainer = document.getElementById('ai-dining-results');
                const cuisine = document.getElementById('dining-cuisine-select').value;
                
                resultsContainer.innerHTML = '';
                loader.classList.remove('hidden');

                const prompt = `ë‹¹ì‹ ì€ ì„¸ë¶€ í˜„ì§€ ìŒì‹ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ë¦¬ì¡°íŠ¸ ê·¼ì²˜ì—ì„œ 19ê°œì›” ì•„ê¸°ì™€ í•¨ê»˜ ê°€ê¸° ì¢‹ì€ ${cuisine} ë§›ì§‘ 3ê³³ì„ ì¶”ì²œí•´ì£¼ì„¸ìš”. ì–´ë¦° ì•„ì´ê°€ ìˆëŠ” ê°€ì¡±ì„ í™˜ì˜í•˜ëŠ” ë¶„ìœ„ê¸°ì—¬ì•¼ í•©ë‹ˆë‹¤. ê° ì‹ë‹¹ì˜ ì´ë¦„, ê°„ë‹¨í•œ ì„¤ëª…, ì£¼ìš” ìŒì‹ ì¢…ë¥˜ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”. ì‘ë‹µì€ ë°˜ë“œì‹œ JSON ê°ì²´ë¡œë§Œ, ê·¸ë¦¬ê³  ëª¨ë“  í‚¤ì™€ ê°’ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
                const schema = {
                    type: "ARRAY",
                    items: {
                        type: "OBJECT",
                        properties: {
                            "ì´ë¦„": { type: "STRING" },
                            "ì„¤ëª…": { type: "STRING" },
                            "ì¢…ë¥˜": { type: "STRING" }
                        },
                        required: ["ì´ë¦„", "ì„¤ëª…", "ì¢…ë¥˜"]
                    }
                };

                const recommendations = await callGeminiAPI(prompt, schema);
                loader.classList.add('hidden');

                if (recommendations) {
                    resultsContainer.innerHTML = recommendations.map(r => `
                        <div class="p-4 rounded-lg border border-blue-200 bg-blue-50">
                            <h5 class="font-bold text-lg text-blue-800">${r['ì´ë¦„']} <span class="text-sm font-medium text-blue-600">(${r['ì¢…ë¥˜']})</span></h5>
                            <p class="text-gray-700 mt-1">${r['ì„¤ëª…']}</p>
                        </div>
                    `).join('');
                } else {
                    resultsContainer.innerHTML = `<p class="text-center text-red-500">ë§›ì§‘ ì¶”ì²œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>`;
                }
                button.disabled = false;
            };

            const handleGenerateDelivery = async (button) => {
                button.disabled = true;
                const loader = document.getElementById('ai-delivery-loader');
                const resultsContainer = document.getElementById('ai-delivery-results');
                const cuisine = document.getElementById('delivery-cuisine-select').value;
                
                resultsContainer.innerHTML = '';
                loader.classList.remove('hidden');

                const prompt = `ë‹¹ì‹ ì€ ì„¸ë¶€ì˜ ë°°ë‹¬ ìŒì‹(ê·¸ë©í‘¸ë“œ, í‘¸ë“œíŒë‹¤) ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ìƒ¹ê·¸ë¦´ë¼ ë§‰íƒ„ ë¦¬ì¡°íŠ¸ì—ì„œ 19ê°œì›” ì•„ê¸°ì™€ í•¨ê»˜ ë¨¹ê¸° ì¢‹ì€ ${cuisine} ë°°ë‹¬ ìŒì‹ 3ê°€ì§€ë¥¼ ì¶”ì²œí•´ì£¼ì„¸ìš”. ê° ë©”ë‰´ì— ëŒ€í•´ ìŒì‹ì  ì´ë¦„, ê°„ë‹¨í•˜ê³  ë§¤ë ¥ì ì¸ ì„¤ëª…, ì£¼ìš” ìŒì‹ ì¢…ë¥˜ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”. ì‘ë‹µì€ ë°˜ë“œì‹œ JSON ê°ì²´ë¡œë§Œ, ê·¸ë¦¬ê³  ëª¨ë“  í‚¤ì™€ ê°’ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
                const schema = {
                    type: "ARRAY",
                    items: {
                        type: "OBJECT",
                        properties: {
                            "ì´ë¦„": { type: "STRING", description: "ìŒì‹ì  ì´ë¦„" },
                            "ì„¤ëª…": { type: "STRING", description: "ìŒì‹ ì„¤ëª…" },
                            "ì¢…ë¥˜": { type: "STRING", description: "ìŒì‹ ì¢…ë¥˜" }
                        },
                        required: ["ì´ë¦„", "ì„¤ëª…", "ì¢…ë¥˜"]
                    }
                };

                const recommendations = await callGeminiAPI(prompt, schema);
                loader.classList.add('hidden');

                if (recommendations) {
                    resultsContainer.innerHTML = recommendations.map(r => `
                        <div class="p-4 rounded-lg border border-purple-200 bg-purple-50">
                            <h5 class="font-bold text-lg text-purple-800">${r['ì´ë¦„']} <span class="text-sm font-medium text-purple-600">(${r['ì¢…ë¥˜']})</span></h5>
                            <p class="text-gray-700 mt-1">${r['ì„¤ëª…']}</p>
                        </div>
                    `).join('');
                } else {
                    resultsContainer.innerHTML = `<p class="text-center text-red-500">ë°°ë‹¬ ìŒì‹ ì¶”ì²œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>`;
                }
                button.disabled = false;
            };

            const updateTotals = (targetCurrency) => {
                const { fixed } = APP_DATA.expenses;
                const { PHP_TO_KRW, PHP_TO_TWD } = APP_DATA.exchangeRates;

                let twdTotal = fixed.filter(e => e.currency === 'TWD').reduce((sum, e) => sum + e.amount, 0);
                let phpTotal = fixed.filter(e => e.currency === 'PHP').reduce((sum, e) => sum + e.amount, 0);

                const additionalPhpTotal = Array.from(document.querySelectorAll('#additional-expenses-list .expense-item'))
                    .reduce((sum, item) => sum + parseFloat(item.dataset.amount), 0);
                
                phpTotal += additionalPhpTotal;

                let displayAmount = 0;
                let displayCurrency = targetCurrency;

                if (targetCurrency === 'PHP') {
                    const twdInPhp = twdTotal / PHP_TO_TWD;
                    displayAmount = phpTotal + twdInPhp;
                } else if (targetCurrency === 'TWD') {
                    const phpInTwd = phpTotal * PHP_TO_TWD;
                    displayAmount = twdTotal + phpInTwd;
                } else if (targetCurrency === 'KRW') {
                    const twdInKrw = (twdTotal / PHP_TO_TWD) * PHP_TO_KRW;
                    const phpInKrw = phpTotal * PHP_TO_KRW;
                    displayAmount = twdInKrw + phpInKrw;
                }
                
                document.getElementById('total-display').textContent = `${displayAmount.toLocaleString(undefined, {maximumFractionDigits: 0})} ${displayCurrency}`;
                document.getElementById('exchange-rate-info').textContent = `* ê¸°ì¤€ í™˜ìœ¨: 1 PHP â‰ˆ ${PHP_TO_TWD} TWD, 1 PHP â‰ˆ ${PHP_TO_KRW} KRW`;

                document.querySelectorAll('.currency-btn').forEach(btn => {
                    btn.classList.toggle('bg-brand-primary', btn.dataset.currency === targetCurrency);
                    btn.classList.toggle('text-white', btn.dataset.currency === targetCurrency);
                    btn.classList.toggle('bg-gray-200', btn.dataset.currency !== targetCurrency);
                });
            };

            // --- Event Listeners Setup ---
            const setupEventListeners = () => {
                document.body.addEventListener('click', (e) => {
                    // Modal Trigger
                    const modalTrigger = e.target.closest('.info-trigger');
                    if (modalTrigger) {
                        openModal(modalTrigger.dataset.modalId);
                        return;
                    }

                    // Accordion
                    const accordionHeader = e.target.closest('.accordion-header');
                    if (accordionHeader) {
                        accordionHeader.nextElementSibling.classList.toggle('hidden');
                        accordionHeader.querySelector("span:last-child").classList.toggle("rotate-180");
                        return;
                    }

                    // Dining Tabs
                    const tabButton = e.target.closest('.tab-button');
                    if (tabButton) {
                        const isRestaurantTab = tabButton.id === 'tab-restaurant';
                        document.getElementById('tab-restaurant').classList.toggle('active', isRestaurantTab);
                        document.getElementById('tab-delivery').classList.toggle('active', !isRestaurantTab);
                        document.getElementById('content-restaurant').classList.toggle('hidden', !isRestaurantTab);
                        document.getElementById('content-delivery').classList.toggle('hidden', isRestaurantTab);
                        return;
                    }

                    // Checklist
                    const checklistInput = e.target.closest('.checklist-item input[type="checkbox"]');
                    if (checklistInput) {
                        checklistInput.closest('li').classList.toggle('checked', checklistInput.checked);
                    }
                    
                    // AI Buttons
                    if (e.target.id === 'generate-itinerary-btn') handleGenerateItinerary(e.target);
                    if (e.target.id === 'generate-dining-btn') handleGenerateDining(e.target);
                    if (e.target.id === 'generate-delivery-btn') handleGenerateDelivery(e.target);

                    // Expenses
                    if (e.target.id === 'add-expense-btn') {
                        const itemInput = document.getElementById('expense-item');
                        const amountInput = document.getElementById('expense-amount');
                        const list = document.getElementById('additional-expenses-list');
                        
                        const item = itemInput.value.trim();
                        const amount = parseFloat(amountInput.value);

                        if (item && amount > 0) {
                            const newExpense = document.createElement('div');
                            newExpense.className = 'flex justify-between items-center p-2 bg-gray-50 rounded-lg expense-item';
                            newExpense.dataset.amount = amount;
                            newExpense.innerHTML = `
                                <span>${item}</span>
                                <span class="font-bold">${amount.toLocaleString()} PHP</span>
                            `;
                            list.appendChild(newExpense);
                            itemInput.value = '';
                            amountInput.value = '';
                            updateTotals(document.querySelector('.currency-btn.bg-brand-primary').dataset.currency);
                        }
                    }

                    // Currency Button
                    const currencyBtn = e.target.closest('.currency-btn');
                    if (currencyBtn) {
                        updateTotals(currencyBtn.dataset.currency);
                    }
                });

                const modal = document.getElementById('info-modal');
                const modalCloseBtn = document.getElementById('modal-close-btn');
                const closeModal = () => {
                    modal.querySelector('.modal-content').classList.add('scale-95');
                    modal.classList.add('opacity-0');
                    setTimeout(() => modal.classList.add('hidden'), 300);
                };
                modalCloseBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            };

            const openModal = (id) => {
                const modal = document.getElementById('info-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalDetails = document.getElementById('modal-details');
                const modalSource = document.getElementById('modal-source');
                const data = APP_DATA.modalData[id];
                if (data) {
                    modalTitle.textContent = data.title;
                    modalDetails.innerHTML = data.details;
                    modalSource.innerHTML = data.source;
                    modal.classList.remove('hidden');
                    setTimeout(() => { 
                        modal.classList.remove('opacity-0');
                        modal.querySelector('.modal-content').classList.remove('scale-95');
                    }, 10);
                }
            };
            
            // --- INITIALIZE APP ---
            renderStaticText();
            renderNavigation();
            renderPrepSection();
            renderExpensesSection();
            renderActivitiesSection();
            renderDiningSection();
            renderSafetySection();
            renderItinerarySection();
            setupEventListeners();

        } catch (error) {
            console.error("An error occurred while initializing the application:", error);
            document.body.innerHTML = `<div class="p-8 text-center text-red-500">í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì£„ì†¡í•©ë‹ˆë‹¤.</div>`;
        }
    });
    </script>
</body>
</html>
